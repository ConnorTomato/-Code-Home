#### [面试题51. 数组中的逆序对](https://leetcode-cn.com/problems/shu-zu-zhong-de-ni-xu-dui-lcof/)

> 归并多一步统计，逆序对题比用归并

```JAVA
class Solution {
    public int reversePairs(int[] nums) {
        return merge(nums,0,nums.length-1);
    }
    int merge(int[] arr, int left, int right){
        if(left >= right) return 0;

        int mid = (left + right)/2;
        int count = merge(arr,left,mid) + merge(arr,mid+1,right);
        int[] temp = new int[right - left + 1];
        int i = left,j = mid + 1,k=0;
        while(i <= mid && j <= right){
            count += (arr[i] <= arr[j]) ? j-(mid + 1) : 0;
            temp[k++] = (arr[i] <= arr[j]) ? arr[i++] : arr[j++];
        }
        while(i <= mid){
            count += j - (mid + 1);
            temp[k++] = arr[i++];
        }
        while(j <= right){
            temp[k++] = arr[j++];
        }
        System.arraycopy(temp,0,arr,left,right-left+1);
        return count;
    }
}
```

**归并排序的代码**

```java
    void merge(int[] arr, int start, int end) {
        if (start == end) return;
        int mid = (start + end) / 2;
        merge(arr, start, mid);
        merge(arr, mid + 1, end);

        int[] temp = new int[end - start + 1];
        int i = start, j = mid + 1, k = 0;
        while(i <= mid && j <= end)
            temp[k++] = arr[i] < arr[j] ? arr[i++] : arr[j++];
        while(i <= mid)
            temp[k++] = arr[i++];
        while(j <= end)
            temp[k++] = arr[j++];
        System.arraycopy(temp, 0, arr, start, end - start + 1);
    }

```

